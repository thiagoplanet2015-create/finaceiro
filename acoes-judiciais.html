<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ações Judiciais - Financeiro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
  :root{
    --brand:#72bf44;
    --brand-600:#5fa535;
    --brand-light:#9fc612;
    --ink:#0f172a;
    --muted:#64748b;
    --paper:#ffffff;
    --bg:#f3f6fb;
    --success:#72bf44;
    --danger:#e11d48;
    --border:#e5e7eb;
    --table-stripe:#fafbff;
  }

  body{ background:var(--bg); color:var(--ink); }
  h1,h2,h3,h4,h5 { color:var(--ink); letter-spacing:.2px; }

  .topbar{
    background: linear-gradient(135deg, var(--brand) 0%, var(--brand-600) 100%);
    color: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .topbar .fw-bold{ color: #fff; font-size: 1.2rem; }
  .topbar .text-muted{ color: rgba(255,255,255,0.85) !important; }

  .card{
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(2,6,23,.05);
  }
  .card-header{
    background:linear-gradient(180deg,#f8fdf5, #e8f5e0);
    border-bottom:1px solid var(--border);
    border-top-left-radius:12px; border-top-right-radius:12px;
  }
  .card-header h5{ color: var(--brand-600); font-weight: 700; }

  .form-label{ font-weight:600; color:#334155; }
  .form-control,.form-select, .form-control:disabled{
    border-radius:10px; border:1px solid var(--border);
    transition: border-color .2s, box-shadow .2s;
  }
  .form-control:focus,.form-select:focus{
    border-color: var(--brand);
    box-shadow: 0 0 0 .2rem rgba(114, 191, 68, .25);
  }
  .form-control[readonly] { background-color: #e9ecef; }
  .btn-primary{
    background:var(--brand); border-color:var(--brand);
    border-radius:10px; font-weight:600;
  }
  .btn-primary:hover{ 
    background:var(--brand-600); 
    border-color:var(--brand-600);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(114, 191, 68, 0.3);
  }
  .btn-outline-primary{
    border-radius:10px; font-weight:600; color:var(--brand); border-color:var(--brand);
  }
  .btn-outline-primary:hover{ background:var(--brand); color:#fff; }
  .btn-outline-secondary{ border-radius:10px; font-weight:600; }
  .btn-outline-danger{ border-radius:8px; font-weight:600; }

  .table{
    --bs-table-striped-bg: var(--table-stripe);
    border-color: var(--border);
  }
  .table thead th{
    position:sticky; top:0; background:#e8f5e0; z-index:2;
    border-bottom:2px solid var(--brand); color:var(--brand-600); font-weight:700;
    font-size: 0.85rem;
  }
  .table>tbody>tr>td, .table>thead>tr>th{ vertical-align: middle; }
  .table-sm td, .table-sm th{ padding:.55rem .6rem; font-size: 0.9rem; }

  .totals-card{
    border:1px dashed #d0ecc0; border-radius:10px; padding:.75rem 1rem;
    background:#f8fdf5;
  }
  .totals-card .label{ color:var(--muted); font-weight: 600; }
  .totals-card .value{ font-weight:700; font-size: 1.1rem; }
  .totals-card .value.success{ color:var(--success); }
</style>
</head>
<body>
  <nav class="topbar">
    <div class="container py-2 d-flex align-items-center justify-content-between">
      <div class="fw-bold">Portal Financeiro - Ações Judiciais</div>
      <div class="text-muted small">
        Empresa: <span id="empresaSpan">-</span> • Usuário: <span id="usuarioSpan">-</span>
      </div>
    </div>
  </nav>

  <div class="container my-4">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h4 class="mb-0">Nova Solicitação de Pagamento</h4>
      <a href="dashboard.html" class="btn btn-outline-secondary btn-sm">← Voltar</a>
    </div>

    <!-- Seção: Dados do Item de Pagamento -->
    <div class="card mb-4">
      <div class="card-header">
        <h5 class="mb-0">Dados da Solicitação</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <!-- Linha 1 -->
          <div class="col-md-6">
            <label for="empresa" class="form-label">Empresa</label>
            <select id="empresa" class="form-select">
              <option value="">Selecione</option>
              <option value="EMPRESA_A">Empresa AGT</option>
              <option value="EMPRESA_B">Empresa B</option>
              <option value="EMPRESA_C">Empresa C</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="tipoNota" class="form-label">Tipo de Nota</label>
            <select id="tipoNota" class="form-select">
              <option value="Padrão">Padrão</option>
              <option value="NF">Nota Fiscal</option>
              <option value="Recibo">Recibo</option>
              <option value="Outros">Outros</option>
            </select>
          </div>
          <!-- Linha 2 -->
          <div class="col-md-12">
            <label for="fornecedor" class="form-label">Fornecedor</label>
            <input type="text" id="fornecedor" value="BALDANI E TERCARIOLI ADVOGADOS ASSOCIADOS" class="form-control" placeholder="Nome do fornecedor" />
          </div>
          <!-- Linha 3 -->
          <div class="col-md-6">
            <label for="nrFornecedor" class="form-label">Nr do Fornecedor</label>
            <input type="text" id="nrFornecedor" value="00513856" class="form-control" placeholder="00513856" />
          </div>
          <div class="col-md-6">
            <label for="nomeLocalFornecedor" class="form-label">Nome local do Fornecedor</label>
            <input type="text" id="nomeLocalFornecedor" value="000144" class="form-control" placeholder="000144" />
          </div>
          <!-- Linha 4 -->
          <div class="col-md-4">
            <label for="dataEmissaoNF" class="form-label">Data da Emissão da NF</label>
            <input type="date" id="dataEmissaoNF" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="numeroNFF" class="form-label">Nº da NFF/C.I</label>
            <input type="text" id="numeroNFF" class="form-control" placeholder="Número NFF/C.I" />
          </div>
          <div class="col-md-4">
            <label for="quantiaNFF" class="form-label">Quantia da NFF/C.I (R$)</label>
            <input type="text" id="quantiaNFF" class="form-control" placeholder="0,00" />
          </div>
          <!-- Linha 5 -->
          <div class="col-md-4">
            <label for="processo" class="form-label">Processo</label>
            <input type="text" id="processo" class="form-control" placeholder="Número do processo" />
          </div>
          <div class="col-md-4">
            <label for="pasta" class="form-label">Pasta</label>
            <input type="text" id="pasta" class="form-control" placeholder="Número da pasta" />
          </div>
          <div class="col-md-4">
            <label for="reclamante" class="form-label">Reclamante</label>
            <input type="text" id="reclamante" class="form-control" placeholder="Nome do reclamante" />
          </div>
          <!-- Linha 6 -->
          <div class="col-md-6">
            <label for="centroCusto" class="form-label">Centro de Custo</label>
            <select id="centroCusto" class="form-select">
              <option value="">Selecione</option>
              <option>CC-001 - Administrativo</option>
              <option>CC-002 - Financeiro</option>
              <option>CC-003 - Jurídico</option>
              <option>CC-004 - Operacional</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="categoria" class="form-label">Categoria</label>
            <select id="categoria" class="form-select">
              <option value="">Selecione</option>
              <option>Ação Trabalhista</option>
              <option>Ação Cível</option>
              <option>Acordo Judicial</option>
              <option>Honorários Advocatícios</option>
              <option>Custas Processuais</option>
            </select>
          </div>
          <!-- Linha 7 - Campos Fixos/Automáticos -->
          <div class="col-md-3">
            <label for="dataGL" class="form-label">Data GL</label>
            <input type="date" id="dataGL" class="form-control" readonly />
          </div>
          <div class="col-md-3">
            <label for="dataTaxaPagto" class="form-label">Data Taxa Pagto</label>
            <input type="date" id="dataTaxaPagto" class="form-control" readonly />
          </div>
          <div class="col-md-3">
            <label for="dataCondicoes" class="form-label">Data das Condições</label>
            <input type="date" id="dataCondicoes" class="form-control" readonly />
          </div>
          <div class="col-md-3">
            <label for="vincularAcao" class="form-label">Vincular Ação</label>
            <input type="text" id="vincularAcao" class="form-control" value="Ordem de Compra" readonly />
          </div>
          <!-- Linha 8 - Campos Fixos -->
          <div class="col-md-4">
            <label for="condicoes" class="form-label">Condições</label>
            <input type="text" id="condicoes" class="form-control" value="À vista" readonly />
          </div>
          <div class="col-md-4">
            <label for="metodoPagamento" class="form-label">Método de Pagamento</label>
            <input type="text" id="metodoPagamento" class="form-control" value="Eletronico" readonly />
          </div>
          <div class="col-md-4">
            <label for="grupoPagamento" class="form-label">Grupo de Pagamento</label>
            <input type="text" id="grupoPagamento" class="form-control" value="Fornecedores" readonly />
          </div>
          <!-- Linha 9 - Descrição e Anexos -->
          <div class="col-md-12">
            <label for="descricaoItem" class="form-label">Descrição</label>
            <textarea id="descricaoItem" class="form-control" rows="7" placeholder="Descreva detalhes sobre o pagamento..."></textarea>
          </div>
          <div class="col-md-12">
            <label for="anexosItem" class="form-label">Anexos</label>
            <input type="file" id="anexosItem" class="form-control" multiple />
            <small class="text-muted">Você pode selecionar múltiplos arquivos</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Seção Unificada: Adicionar Itens de Pagamento -->
    <div class="card mb-4">
      <div class="card-header">
        <h5 class="mb-0">Adicionar Itens de Pagamento</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-12">
            <label for="tipoItem" class="form-label">Tipo de Item</label>
            <select id="tipoItem" class="form-select">
              <option value="beneficiario">Beneficiário</option>
              <option value="imposto">INSS / Imposto</option>
            </select>
          </div>
        </div>

        <!-- Campos para Beneficiário -->
        <div id="camposBeneficiario" class="row g-3 mt-2">
          <div class="col-md-6">
            <label for="nomeBenef" class="form-label">Nome Beneficiário</label>
            <input type="text" id="nomeBenef" class="form-control" placeholder="Nome completo" />
          </div>
          <div class="col-md-3">
            <label for="tipoDocumento" class="form-label">Tipo de Documento</label>
            <select id="tipoDocumento" class="form-select">
              <option value="CPF">CPF</option>
              <option value="CNPJ">CNPJ</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="numeroDocumento" class="form-label">CPF/CNPJ do Beneficiário</label>
            <input type="text" id="numeroDocumento" class="form-control" placeholder="000.000.000-00" maxlength="14" />
          </div>
          <div class="col-md-3">
            <label for="bancoBenef" class="form-label">Banco</label>
            <input type="text" id="bancoBenef" class="form-control" placeholder="Nome do banco" />
          </div>
          <div class="col-md-3">
            <label for="agenciaBenef" class="form-label">Agência</label>
            <input type="text" id="agenciaBenef" class="form-control" placeholder="0000" />
          </div>
          <div class="col-md-3">
            <label for="tipoContaBenef" class="form-label">Tipo de Conta</label>
            <select id="tipoContaBenef" class="form-select">
              <option value="">Selecione</option>
              <option value="Corrente">Corrente</option>
              <option value="Poupança">Poupança</option>
              <option value="Salário">Salário</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="numeroContaBenef" class="form-label">Número da Conta</label>
            <input type="text" id="numeroContaBenef" class="form-control" placeholder="0000-0" />
          </div>
          <div class="col-md-3">
            <label for="valorBenef" class="form-label">Valor (R$)</label>
            <input type="text" id="valorBenef" class="form-control" placeholder="0,00" />
          </div>
          <div class="col-md-9">
            <label for="descricaoBenef" class="form-label">Descrição do Pagamento</label>
            <textarea id="descricaoBenef" class="form-control" placeholder="Descreva o que é o pagamento"></textarea>
          </div>
          <div class="col-md-6">
            <label for="chaveContabilBenef" class="form-label">Chave Contábil</label>
            <input type="text" id="chaveContabilBenef" class="form-control" placeholder="Ex: 1.2.3.4.5" />
          </div>
          <div class="col-md-6">
            <label for="dataPagamentoBenef" class="form-label">Data do Pagamento</label>
            <input type="date" id="dataPagamentoBenef" class="form-control" />
          </div>
        </div>

        <!-- Campos para INSS/Imposto -->
        <div id="camposImposto" class="row g-3 mt-2" style="display:none;">
          <div class="col-md-12">
            <label for="descricaoImposto" class="form-label">Descrição</label>
            <textarea id="descricaoImposto" class="form-control" placeholder="Descreva o pagamento"></textarea>
          </div>
          <div class="col-md-4">
            <label for="valorImposto" class="form-label">Valor (R$)</label>
            <input type="text" id="valorImposto" class="form-control" placeholder="0,00" />
          </div>
          <div class="col-md-4">
            <label for="tipoImposto" class="form-label">Tipo de Pagamento</label>
            <select id="tipoImposto" class="form-select">
              <option value="">Selecione</option>
              <option value="INSS">INSS</option>
              <option value="Imposto">Imposto</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="dataPagamentoImposto" class="form-label">Data do Pagamento</label>
            <input type="date" id="dataPagamentoImposto" class="form-control" />
          </div>
          <div class="col-md-12">
            <label for="chaveContabilImposto" class="form-label">Chave Contábil</label>
            <input type="text" id="chaveContabilImposto" class="form-control" placeholder="Ex: 1.2.3.4.5" />
          </div>
        </div>

        <div class="col-12 mt-3">
          <button type="button" class="btn btn-outline-primary" onclick="adicionarItem()">
            + Adicionar Item
          </button>
        </div>

        <!-- Tabela de Itens Adicionados -->
        <div class="mt-4" id="listaItens" style="display:none;">
          <h6 class="mb-3">Itens Adicionados</h6>
          <div class="table-responsive">
            <table class="table table-sm table-striped">
              <thead>
                <tr>
                  <th>Tipo</th>
                  <th>Nome / Descrição</th>
                  <th>CPF/CNPJ</th>
                  <th>Dados Bancários</th>
                  <th>Chave Contábil</th>
                  <th>Data Pagto</th>
                  <th>Valor</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="tabelaItens"></tbody>
            </table>
          </div>
          <div class="totals-card mt-3">
            <div class="d-flex justify-content-between">
              <span class="label">Total Geral dos Itens:</span>
              <span class="value success" id="totalItens">R$ 0,00</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Botão Próximo -->
    <div class="d-grid gap-2">
      <button class="btn btn-primary btn-lg" onclick="proximaPagina()">
        Enviar para Aprovação »
      </button>
    </div>
  </div>

  <script>
  const empresa = sessionStorage.getItem('empresa');
  const usuario = sessionStorage.getItem('usuario');
  document.getElementById('empresaSpan').textContent = empresa || '-';
  document.getElementById('usuarioSpan').textContent = usuario || '-';

  let itensPagamento = [];

  document.addEventListener('DOMContentLoaded', function() {
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const day = String(today.getDate()).padStart(2, '0');
    const formattedDate = `${year}-${month}-${day}`;

    const dataEmissaoNF_El = document.getElementById('dataEmissaoNF');
    dataEmissaoNF_El.value = formattedDate;
    dataEmissaoNF_El.dispatchEvent(new Event('change'));
  });

  document.getElementById('dataEmissaoNF').addEventListener('change', function() {
    const data = this.value;
    document.getElementById('dataGL').value = data;
    document.getElementById('dataTaxaPagto').value = data;
    document.getElementById('dataCondicoes').value = data;
  });

  document.getElementById('tipoItem').addEventListener('change', function() {
    const tipo = this.value;
    if (tipo === 'beneficiario') {
      document.getElementById('camposBeneficiario').style.display = 'flex';
      document.getElementById('camposImposto').style.display = 'none';
    } else if (tipo === 'imposto') {
      document.getElementById('camposBeneficiario').style.display = 'none';
      document.getElementById('camposImposto').style.display = 'flex';
    }
  });

  const tipoDocumentoEl = document.getElementById('tipoDocumento');
  const numeroDocumentoEl = document.getElementById('numeroDocumento');

  tipoDocumentoEl.addEventListener('change', function() {
    numeroDocumentoEl.value = '';
    if (this.value === 'CPF') {
      numeroDocumentoEl.placeholder = '000.000.000-00';
      numeroDocumentoEl.maxLength = 14;
    } else {
      numeroDocumentoEl.placeholder = '00.000.000/0000-00';
      numeroDocumentoEl.maxLength = 18;
    }
  });

  numeroDocumentoEl.addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    if (tipoDocumentoEl.value === 'CPF') {
      value = value.replace(/(\d{3})(\d)/, '$1.$2');
      value = value.replace(/(\d{3})(\d)/, '$1.$2');
      value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    } else {
      value = value.replace(/^(\d{2})(\d)/, '$1.$2');
      value = value.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
      value = value.replace(/\.(\d{3})(\d)/, '.$1/$2');
      value = value.replace(/(\d{4})(\d)/, '$1-$2');
    }
    e.target.value = value;
  });


  function adicionarItem() {
    const tipo = document.getElementById('tipoItem').value;
    let item = { tipo };
    let valido = true;

    if (tipo === 'beneficiario') {
      item.nome = document.getElementById('nomeBenef').value.trim();
      item.tipoDocumento = document.getElementById('tipoDocumento').value;
      item.numeroDocumento = document.getElementById('numeroDocumento').value.trim();
      item.banco = document.getElementById('bancoBenef').value.trim();
      item.agencia = document.getElementById('agenciaBenef').value.trim();
      item.tipoConta = document.getElementById('tipoContaBenef').value;
      item.numeroConta = document.getElementById('numeroContaBenef').value.trim();
      item.valor = document.getElementById('valorBenef').value.trim();
      item.descricao = document.getElementById('descricaoBenef').value.trim();
      item.chaveContabil = document.getElementById('chaveContabilBenef').value.trim();
      item.dataPagamento = document.getElementById('dataPagamentoBenef').value;

      if (!item.nome || !item.numeroDocumento || !item.banco || !item.agencia || !item.tipoConta || !item.numeroConta || !item.valor) {
        alert('Preencha todos os campos obrigatórios do beneficiário!');
        valido = false;
      }
    } else if (tipo === 'imposto') {
      item.valor = document.getElementById('valorImposto').value.trim();
      item.descricao = document.getElementById('descricaoImposto').value.trim();
      item.tipoImposto = document.getElementById('tipoImposto').value;
      item.chaveContabil = document.getElementById('chaveContabilImposto').value.trim();
      item.dataPagamento = document.getElementById('dataPagamentoImposto').value; // <-- NOVO

      if (!item.valor || !item.descricao || !item.tipoImposto || !item.dataPagamento) { // <-- NOVO
        alert('Preencha todos os campos obrigatórios do INSS/Imposto!');
        valido = false;
      }
    }

    if (valido) {
      itensPagamento.push(item);
      renderizarItens();
      limparCamposItem(tipo);
    }
  }

  function limparCamposItem(tipo) {
    if (tipo === 'beneficiario') {
      ['nomeBenef','numeroDocumento','bancoBenef','agenciaBenef','tipoContaBenef','numeroContaBenef',
       'valorBenef','descricaoBenef','chaveContabilBenef','dataPagamentoBenef'].forEach(id => {
        document.getElementById(id).value = '';
      });
    } else if (tipo === 'imposto') {
      ['valorImposto','descricaoImposto','tipoImposto','chaveContabilImposto', 'dataPagamentoImposto'].forEach(id => { // <-- NOVO
        document.getElementById(id).value = '';
      });
    }
  }

  function renderizarItens() {
    const tbody = document.getElementById('tabelaItens');
    const lista = document.getElementById('listaItens');
    
    if (itensPagamento.length === 0) {
      lista.style.display = 'none';
      return;
    }

    lista.style.display = 'block';
    tbody.innerHTML = '';
    let total = 0;

    itensPagamento.forEach((item, idx) => {
      const valorNum = parseFloat(item.valor.replace(',', '.')) || 0;
      total += valorNum;
      const tr = document.createElement('tr');
      const dataPagtoFormatada = item.dataPagamento ? new Date(item.dataPagamento + 'T00:00:00').toLocaleDateString('pt-BR') : '-';

      if (item.tipo === 'beneficiario') {
        tr.innerHTML = `
          <td><span class="badge bg-primary">Beneficiário</span></td>
          <td>${item.nome}</td>
          <td>${item.numeroDocumento}</td>
          <td>${item.banco} / Ag: ${item.agencia} / CC: ${item.numeroConta}</td>
          <td>${item.chaveContabil || '-'}</td>
          <td>${dataPagtoFormatada}</td>
          <td>R$ ${item.valor}</td>
          <td>
            <button class="btn btn-sm btn-outline-danger" onclick="removerItem(${idx})">
              Remover
            </button>
          </td>
        `;
      } else if (item.tipo === 'imposto') { // <-- MUDANÇA AQUI
        tr.innerHTML = `
          <td><span class="badge bg-info">${item.tipoImposto}</span></td>
          <td>${item.descricao}</td>
          <td>-</td>
          <td>-</td>
          <td>${item.chaveContabil || '-'}</td>
          <td>${dataPagtoFormatada}</td>
          <td>R$ ${item.valor}</td>
          <td>
            <button class="btn btn-sm btn-outline-danger" onclick="removerItem(${idx})">
              Remover
            </button>
          </td>
        `;
      }
      tbody.appendChild(tr);
    });

    document.getElementById('totalItens').textContent = 
      `R$ ${total.toFixed(2).replace('.', ',')}`;
  }

  function removerItem(idx) {
    itensPagamento.splice(idx, 1);
    renderizarItens();
  }

  function proximaPagina() {
    const camposObrigatorios = ['empresa','fornecedor','nrFornecedor','processo','pasta','reclamante', 'centroCusto', 'categoria', 'dataEmissaoNF'];
    let ok = true;
    
    camposObrigatorios.forEach(id => {
      const el = document.getElementById(id);
      if (!el.value.trim()) {
        el.classList.add('is-invalid');
        ok = false;
      } else {
        el.classList.remove('is-invalid');
      }
    });

    if (!ok) {
      alert('Preencha todos os campos obrigatórios do cabeçalho!');
      return;
    }

    if (itensPagamento.length === 0) {
      alert('Adicione pelo menos um item de pagamento (beneficiário ou imposto)!');
      return;
    }

    const dados = {
      empresa: document.getElementById('empresa').value,
      tipoNota: document.getElementById('tipoNota').value,
      fornecedor: document.getElementById('fornecedor').value,
      nrFornecedor: document.getElementById('nrFornecedor').value,
      nomeLocalFornecedor: document.getElementById('nomeLocalFornecedor').value,
      dataEmissaoNF: document.getElementById('dataEmissaoNF').value,
      numeroNFF: document.getElementById('numeroNFF').value,
      quantiaNFF: document.getElementById('quantiaNFF').value,
      processo: document.getElementById('processo').value,
      pasta: document.getElementById('pasta').value,
      reclamante: document.getElementById('reclamante').value,
      centroCusto: document.getElementById('centroCusto').value,
      categoria: document.getElementById('categoria').value,
      dataGL: document.getElementById('dataGL').value,
      dataTaxaPagto: document.getElementById('dataTaxaPagto').value,
      dataCondicoes: document.getElementById('dataCondicoes').value,
      vincularAcao: document.getElementById('vincularAcao').value,
      condicoes: document.getElementById('condicoes').value,
      metodoPagamento: document.getElementById('metodoPagamento').value,
      grupoPagamento: document.getElementById('grupoPagamento').value,
      descricaoItem: document.getElementById('descricaoItem').value,
      itensPagamento: itensPagamento,
      usuario: usuario,
      dataEnvio: new Date().toISOString()
    };

    sessionStorage.setItem('dadosAcaoJudicial', JSON.stringify(dados));
    console.log('Dados salvos:', dados);
    window.location.href = 'acoes-judiciais-relatorio.html';
  }
</script>
</body>
</html>